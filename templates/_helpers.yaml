
{{- define "roundcube.encryption" -}}
{{- if not (has . (list "none" "starttls" "ssltls")) -}}
{{ required (printf "invalid value for encryption: %s" .) nil -}}
{{- else if  eq . "starttls" -}}
tls://
{{- else if  eq . "ssltls" -}}
ssl://
{{- end -}}
{{- end -}}

{{- define "roundcube.desKey" -}}
{{- $desKey := index (lookup "v1" "Secret" .Release.Namespace (include "common.names.fullname" . )).data "desKey" -}}
{{- if $desKey -}}
{{- $desKey -}}
{{- else -}}
{{- randAlphaNum 32 -}}
{{- end -}}
{{- end -}}
